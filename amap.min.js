/*! For license information please see amap.min.js.LICENSE.txt */
!function(e,o){"object"===typeof exports&&"object"===typeof module?module.exports=o(require("react"),require("react-dom")):"function"===typeof define&&define.amd?define(["react","react-dom"],o):"object"===typeof exports?exports["@uiw/react-amap"]=o(require("react"),require("react-dom")):e["@uiw/react-amap"]=o(e.React,e.ReactDOM)}(self,((e,o)=>(()=>{"use strict";var n={858:(e,o,n)=>{var t=n(787),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(e,o,n){var t,a={},u=null,c=null;for(t in void 0!==n&&(u=""+n),void 0!==o.key&&(u=""+o.key),void 0!==o.ref&&(c=o.ref),o)i.call(o,t)&&!s.hasOwnProperty(t)&&(a[t]=o[t]);if(e&&e.defaultProps)for(t in o=e.defaultProps)void 0===a[t]&&(a[t]=o[t]);return{$$typeof:r,type:e,key:u,ref:c,props:a,_owner:l.current}}o.jsx=u,o.jsxs=u},664:(e,o,n)=>{e.exports=n(858)},787:o=>{o.exports=e},156:e=>{e.exports=o}},t={};function r(e){var o=t[e];if(void 0!==o)return o.exports;var a=t[e]={exports:{}};return n[e](a,a.exports,r),a.exports}r.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return r.d(o,{a:o}),o},r.d=(e,o)=>{for(var n in o)r.o(o,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},r.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return(()=>{function e(e,o,n,t,r,a,i){try{var l=e[a](i),s=l.value}catch(u){return void n(u)}l.done?o(s):Promise.resolve(s).then(t,r)}r.r(a),r.d(a,{APILoader:()=>c,AutoComplete:()=>C,BezierCurve:()=>P,Circle:()=>H,CircleMarker:()=>B,Context:()=>k,ContextMenu:()=>W,ControlBarControl:()=>F,Ellipse:()=>Y,Geolocation:()=>$,HawkEyeControl:()=>X,InfoWindow:()=>ne,LabelMarker:()=>ve,Map:()=>O,MapTypeControl:()=>ae,Marker:()=>de,MassMarks:()=>me,MouseTool:()=>Se,MouseToolDrawType:()=>Te,PolyEditor:()=>we,Polygon:()=>ye,PolygonEditor:()=>Ce,Polyline:()=>ke,PolylineEditor:()=>be,Provider:()=>R,Rectangle:()=>xe,ScaleControl:()=>Pe,Text:()=>He,TileLayer:()=>se,TileLayerType:()=>le,ToolBarControl:()=>Ne,Weather:()=>je,delay:()=>u,initialState:()=>A,reducer:()=>g,requireCss:()=>i,requireScript:()=>l,useAutoComplete:()=>y,useBezierCurve:()=>I,useCircle:()=>D,useCircleMarker:()=>N,useContextMenu:()=>_,useControlBarControl:()=>Z,useEllipse:()=>q,useEventProperties:()=>h,useGeolocation:()=>V,useHawkEyeControl:()=>J,useInfoWindow:()=>oe,useMap:()=>T,useMapContext:()=>b,useMapTypeControl:()=>re,useMarker:()=>ce,useMassMarks:()=>Me,usePolygon:()=>Ee,usePolyline:()=>ge,usePortal:()=>v,usePrevious:()=>m,useRectangle:()=>Oe,useScaleControl:()=>Ie,useSetStatus:()=>f,useSettingProperties:()=>E,useText:()=>De,useTileLayer:()=>ie,useToolBarControl:()=>ze,useVisiable:()=>M,useWeather:()=>Be});var o=r(787),n=r.n(o),t={};function i(e,o){void 0===o&&(o="_react_amap_css");var n=document&&(document.head||document.getElementsByTagName("head")[0]),r=document.getElementById(o);return new Promise(((a,i)=>{if(!document||e in t||r)a();else{var l=document.createElement("link");l.type="text/css",l.rel="stylesheet",l.id=o,l.href=e,l.onerror=o=>{n.removeChild(l),i(new URIError("The css "+e+" is no accessible."))},l.onload=()=>{t[e]=!0,a()},n.appendChild(l)}}))}function l(e,o){void 0===o&&(o="_react_amap_plugin");var n=document&&(document.head||document.getElementsByTagName("head")[0]),r=document.getElementById(o);return new Promise(((a,i)=>{if(!document||e in t||r)a();else{var l=document.createElement("script");l.type="text/javascript",l.id=o,l.async=!0,l.defer=!0,l.src=e,l.onerror=o=>{n.removeChild(l),i(new URIError("The Script "+e+" is no accessible."))},l.onload=()=>{t[e]=!0,a()},n.appendChild(l)}}))}var s=r(664);function u(e){return new Promise(((o,n)=>{window.setTimeout(o,e)}))}class c extends o.Component{constructor(e){if(super(e),this.isMountedOk=!1,this.state={loaded:!!window.AMap},this.handleError=e=>{this.isMountedOk&&this.setState({error:e})},this.finish=()=>{this.isMountedOk&&this.setState({loaded:!0})},null===e.akay)throw new TypeError("AMap: akay is required")}componentDidMount(){this.isMountedOk=!0;var{callbackName:e}=this.props;if(null==window.AMap){if(window[e])return void c.waitQueue.push([this.finish,this.handleError]);this.loadMap()}}componentWillUnmount(){this.isMountedOk=!1}render(){return this.props.disableScripts||this.state.loaded?this.props.children:this.props.fallback?this.props.fallback(this.state.error):this.state.error?(0,s.jsx)("div",{style:{color:"red"},children:this.state.error.message}):null}getScriptSrc(){var e=this.props,o=e.protocol||window.location.protocol;-1===o.indexOf(":")&&(o+=":");var n="";return e.plugin&&(n="&plugin="+e.plugin),o+"//"+e.hostAndPath+"?v="+e.version+"&key="+e.akay+"&callback="+e.callbackName+n}loadMap(){var o,n=this;return(o=function*(){var{callbackName:e}=n.props,o=n.getScriptSrc();window[e]=()=>{var e=c.waitQueue;c.waitQueue=[],e.forEach((e=>e[0]())),n.finish()};for(var t=function*(){try{return yield l(o),"break"}catch(a){if(2===r){var e=new Error("Failed to load AMap: "+a.message),t=c.waitQueue;return c.waitQueue=[],t.forEach((o=>o[1](e))),n.handleError(e),{v:void 0}}yield u(1e3*r)}},r=0;r<3;r++){var a=yield*t();if("break"===a)break;if("object"===typeof a)return a.v}},function(){var n=this,t=arguments;return new Promise((function(r,a){var i=o.apply(n,t);function l(o){e(i,r,a,l,s,"next",o)}function s(o){e(i,r,a,l,s,"throw",o)}l(void 0)}))})()}}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var n=arguments[o];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},d.apply(this,arguments)}c.defaultProps={protocol:/^file:/.test(window.location.protocol)?"https":window.location.protocol,akay:"",hostAndPath:"webapi.amap.com/maps",version:"2.0",callbackName:"load_amap_sdk",plugin:""},c.waitQueue=[];var p=r(156),v=()=>{var[e]=n().useState((()=>document.createElement("div"))),[t,r]=(0,o.useState)({render:()=>null,remove:()=>null}),a=n().useCallback((e=>({render:o=>{var{children:n}=o;return n?(0,p.createPortal)(n,e):null},remove:e=>{e&&(0,p.unmountComponentAtNode)(e)}})),[]);return(0,o.useEffect)((()=>{e&&t.remove();var o=a(e);return r(o),()=>{o.remove(e)}}),[e]),{Portal:t.render,container:e}};function f(e,n,t){void 0===n&&(n={}),void 0===t&&(t=[]),t.forEach((t=>{var r=t,[a,i]=(0,o.useState)(n[r]);(0,o.useEffect)((()=>{if(e&&void 0!==n[r]&&n[r]!==a){var o=e.getStatus();e.setStatus(d({},o,{[r]:n[r]})),i(n[r])}}),[e,n[r]])}))}function M(e,n){var[t,r]=(0,o.useState)(n);(0,o.useEffect)((()=>{e&&void 0!==n&&(n?e.show&&e.show():e.hide&&e.hide(),n!==t&&r(n))}),[e,n])}function m(e){var n=(0,o.useRef)();return(0,o.useEffect)((()=>{n.current=e})),n.current}function h(e,n,t,r){void 0===n&&(n={}),void 0===t&&(t=[]),t.forEach((t=>{var r=t,a=n[r];(0,o.useEffect)((()=>{if(e){var o=t.toLocaleLowerCase().replace(/^on/,"");return a&&o&&e.on(o,a),()=>{o&&a&&e.off(o,a)}}}),[e,n[r]])}))}function E(e,n,t){void 0===e&&(e={}),void 0===n&&(n={}),void 0===t&&(t=[]),t.forEach((t=>{var r="set"+t,a=""+t.charAt(0).toLowerCase()+t.slice(1),[i,l]=(0,o.useState)(n[a]);(0,o.useEffect)((()=>{e&&void 0!==n[a]&&n[a]!==i&&e[r]&&"function"===typeof e[r]&&(e[r](n[a]),l(n[a]))}),[e,n[a]])}))}var y=function(e){void 0===e&&(e={});var[n,t]=(0,o.useState)();return(0,o.useEffect)((()=>{var o;if(AMap&&!n)return AMap.v?AMap.plugin(["AMap.Autocomplete"],(()=>{o=new AMap.Autocomplete(e),t(o)})):AMap.plugin(["AMap.AutoComplete"],(()=>{o=new AMap.AutoComplete(e),t(o)})),()=>{o&&t(void 0)}}),[]),E(n,e,["Type","City","CityLimit"]),h(n,e,["onChoose","onSelect"]),{autoComplete:n,setAutoComplete:t}},C=n().forwardRef(((e,n)=>{var{autoComplete:t}=y(e);return(0,o.useImperativeHandle)(n,(()=>d({},e,{autoComplete:t}))),null}));function w(e,o){if(null==e)return{};var n,t,r={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],o.indexOf(n)>=0||(r[n]=e[n]);return r}var A={map:void 0,AMap:void 0,container:void 0},g=(e,o)=>d({},e,o),k=n().createContext({state:A,dispatch:()=>null});function b(){var{state:e,dispatch:n}=(0,o.useContext)(k);return d({},e,{state:e,dispatch:n})}var T=function(e){void 0===e&&(e={});var n=d({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e)),[t,r]=(0,o.useState)(),[a,i]=(0,o.useState)(e.zoom||15),[l,s]=(0,o.useState)(e.container),{dispatch:u}=(0,o.useContext)(k);return(0,o.useEffect)((()=>{if(l&&!t&&AMap){l.className=l.className+" react-amap-wapper";var e=new AMap.Map(l,d({zoom:a},n));r(e)}return()=>{t&&(t.clearInfoWindow(),t.clearLimitBounds(),t.clearMap(),t.destroy(),r(void 0))}}),[l,t]),(0,o.useEffect)((()=>(t&&l&&u({map:t,container:l,AMap:AMap}),()=>{u({map:void 0,container:void 0,AMap:void 0})})),[t,l]),(0,o.useMemo)((()=>{t&&"number"===typeof e.zoom&&a!==e.zoom&&e.zoom>=2&&e.zoom<=20&&(i(e.zoom),t.setZoom(e.zoom))}),[a,e.zoom]),(0,o.useMemo)((()=>{e.center&&t&&t.setCenter(e.center)}),[t,e.center]),f(t,e,["dragEnable","zoomEnable","jogEnable","pitchEnable","rotateEnable","animateEnable","keyboardEnable"]),E(t,e,["Zoom","LabelzIndex","Layers","City","Bounds","LimitBounds","Lang","Rotation","DefaultCursor","MapStyle","Features","DefaultLayer","Pitch"]),h(t,e,["onMouseMove","onZoomChange","onMapMove","onMouseWheel","onZoomStart","onMouseOver","onMouseOut","onDblClick","onClick","onZoomEnd","onMoveEnd","onMouseUp","onMouseDown","onRightClick","onMoveStart","onDragStart","onDragging","onDragEnd","onHotspotOut","onHotspotOver","onTouchStart","onComplete","onHotspotClick","onTouchMove","onTouchEnd","onResize"]),{map:t,setMap:r,zoom:a,setZoom:i,container:l,setContainer:s}},S=["className","children"],R=e=>{var[n,t]=(0,o.useReducer)(g,A);return(0,s.jsx)(k.Provider,{value:d({},n,{state:n,dispatch:t}),children:e.children})},O=(0,o.forwardRef)(((e,n)=>{var{className:t,children:r}=e,a=w(e,S),i=window.AMap,[l,u]=(0,o.useReducer)(g,A),c=(0,o.useRef)(null),{setContainer:p,container:v,map:f}=T(d({container:a.container||c.current},a));(0,o.useEffect)((()=>p(c.current)),[c.current]),(0,o.useImperativeHandle)(n,(()=>d({},a,{map:f,AMap:i,container:a.container||c.current})),[f]);var M=o.Children.toArray(r);return(0,o.useEffect)((()=>{f&&u({map:f,container:c.current,AMap:i})}),[f]),(0,s.jsxs)(k.Provider,{value:d({},l,{state:l,dispatch:u}),children:[!a.container&&(0,s.jsx)("div",{ref:c,className:t,style:d({fontSize:1,width:"100%",height:"100%"},a.style)}),i&&f&&"function"===typeof r&&r({AMap:i,map:f,container:v}),i&&f&&M.map(((e,n)=>(0,o.isValidElement)(e)?"string"===typeof e?(0,o.cloneElement)((0,s.jsx)(o.Fragment,{children:e}),{key:n}):e.type&&"string"===typeof e.type?(0,o.cloneElement)(e,{key:n}):(0,o.cloneElement)(e,d({},e.props,{AMap:i,map:f,container:v,key:n})):null))]})})),x=["visiable"],I=function(e){void 0===e&&(e={});var{visiable:n}=e,t=w(e,x),{map:r}=b(),[a,i]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&r&&!a){var e=new AMap.BezierCurve(d({},t));return r.add(e),i(e),()=>{e&&(AMap.v?r&&r.remove(e):r&&r.removeLayer(e),i(void 0))}}}),[r]),M(a,n),E(a,e,["Options","Path","ExtData","ExtData"]),h(a,e,["onHide","onShow","onDblClick","onMouseOver","onMouseUp","onMouseDown","onclick","onTouchEnd","onTouchMove","onTouchStart","onRightClick","onMouseOut"]),{bezierCurve:a,setBezierCurve:i}},P=n().forwardRef(((e,n)=>{var{bezierCurve:t}=I(e);return(0,o.useImperativeHandle)(n,(()=>d({},e,{bezierCurve:t}))),null})),L=["visiable"],D=function(e){void 0===e&&(e={});var{visiable:n}=e,t=w(e,L),{map:r}=b(),[a,i]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&r&&!a){var e=new AMap.Circle(d({},t));r.add(e),i(e)}return()=>{a&&(r&&r.remove(a),i(void 0))}}),[r]),M(a,n),E(a,e,["Center","Raius","Options","ExtData"]),h(a,e,["onHide","onShow","onRightClick","onClick","onTouchEnd","onDblClick","onTouchMove","onTouchStart","onMouseOut","onMouseOver","onMouseUp","onMouseDown"]),{circle:a,setCircle:i}},H=n().forwardRef(((e,n)=>{var{circle:t}=D(e);return(0,o.useImperativeHandle)(n,(()=>d({},e,{circle:t}))),null})),z=["visiable"],N=function(e){void 0===e&&(e={});var{visiable:n}=e,t=w(e,z),{map:r}=b(),[a,i]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&r&&!a){var e=new AMap.CircleMarker(d({},t));return r.add(e),i(e),()=>{e&&(AMap.v?r&&r.remove(e):r&&r.removeLayer(e),i(void 0))}}}),[r]),M(a,n),E(a,e,["Center","Raius","zIndex","Bubble","Cursor","StrokeColor","StrokeOpacity","StrokeWeight","FillColor","FillOpacity","Draggable","ExtData"]),h(a,e,["onHide","onShow","onMouseover","onTouchend","onClick","onTouchmove","onRightclick","onMouseup","onMouseout","onTouchstart","onMousedown","onDblclick"]),{circleMarker:a,setCircleMarker:i}},B=n().forwardRef(((e,n)=>{var{circleMarker:t}=N(e);return(0,o.useImperativeHandle)(n,(()=>d({},e,{circleMarker:t}))),null})),j=["position"],_=function(e){void 0===e&&(e={});var{position:n}=e,t=w(e,j),{map:r}=b(),[a,i]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&r&&!a){var e=new AMap.ContextMenu(d({},t));i(e);var o=o=>e.open(r,n||o.lnglat);return r.on("rightclick",o),()=>{e&&(e.close(),r.off("rightclick",o),i(void 0))}}}),[r]),h(a,e,["onOpen","onClose"]),{contextMenu:a,setContextMenu:i}},U=function(){};var W=n().forwardRef(((e,t)=>{var{contextMenu:r}=_(e);(0,o.useImperativeHandle)(t,(()=>d({},e,{contextMenu:r})));var a=n().Children.toArray(e.children);return(0,s.jsx)(o.Fragment,{children:AMap&&r&&a.map(((o,t)=>n().isValidElement(o)?n().cloneElement(o,d({},o.props,{AMap:AMap,map:e.map,contextMenu:r,key:t})):null))})}));function Z(e){void 0===e&&(e={});var{position:n,visiable:t,offset:r}=e,[a,i]=(0,o.useState)(),{map:l}=b();return(0,o.useEffect)((()=>{var e;if(l&&!a)return l.plugin(["AMap.ControlBar","AMap.HawkEye"],(()=>{e=new AMap.ControlBar({offset:r,position:n}),l.addControl(e),i(e)})),()=>{e&&l.removeControl(e)}}),[l]),M(a,t),{controlBarControl:a,setControlBarControl:i}}W.Item=function(e){void 0===e&&(e={});var{text:n="",onClick:t=U}=e;return(0,o.useEffect)((()=>(e.contextMenu&&e.contextMenu.addItem(n,t,1),()=>{e.contextMenu&&e.contextMenu.removeItem(n,t)})),[e.contextMenu,e.text,e.onClick]),null};var F=n().forwardRef(((e,n)=>{var{controlBarControl:t}=Z(e);return(0,o.useImperativeHandle)(n,(()=>d({},e,{controlBarControl:t})),[t]),null})),G=["visiable"],q=function(e){void 0===e&&(e={});var{visiable:n}=e,t=w(e,G),{map:r}=b(),[a,i]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&r&&!a){var e=new AMap.Ellipse(d({},t));return r.add(e),i(e),()=>{e&&(AMap.v?r&&r.remove(e):r&&r.removeLayer(e),i(void 0))}}}),[r]),M(a,n),E(a,e,["Center","Radius","Options","ExtData"]),h(a,e,["onHide","onShow","onClick","onDblClick","onRightClick","onMouseOut","onMouseOver","onMouseUp","onMouseDown","onTouchEnd","onTouchMove","onTouchStart"]),{ellipse:a,setEllipse:i}},Y=n().forwardRef(((e,n)=>{var{ellipse:t}=q(e);return(0,o.useImperativeHandle)(n,(()=>d({},e,{ellipse:t}))),null})),Q=["type","onComplete","onError"],V=function(e){void 0===e&&(e={});var{type:n="position",onComplete:t,onError:r}=e,a=w(e,Q),[i,l]=(0,o.useState)(),{map:s}=b();function u(e,o){"complete"===e&&t?t(o):r&&r(o)}return(0,o.useEffect)((()=>{var e;if(AMap&&!i)return AMap.plugin(["AMap.Geolocation"],(()=>{e=new AMap.Geolocation(d({},a)),l(e)})),()=>{e&&l(void 0)}}),[AMap]),(0,o.useMemo)((()=>{if(/^(position|cityInfo)$/.test(n)){var e="position"===n?"getCurrentPosition":"getCityInfo";i&&s?(i[e](u),s.addControl(i)):i&&i[e](u)}}),[i]),{geolocation:i,setGeolocation:l}},$=n().forwardRef(((e,n)=>{var{geolocation:t}=V(e);return(0,o.useImperativeHandle)(n,(()=>d({},e,{geolocation:t}))),null})),K=["offset","visiable"];function J(e){void 0===e&&(e={});var[n,t]=(0,o.useState)(),{offset:r,visiable:a}=e,i=w(e,K),{map:l}=b();return(0,o.useEffect)((()=>{var e;if(l&&!n)return l.plugin(["AMap.HawkEye"],(()=>{e=new AMap.HawkEye(d({offset:r},i)),l.addControl(e),t(e)})),()=>{e&&l&&(l&&l.removeControl(e),t(void 0))}}),[l]),M(n,a),{hawkEyeControl:n,setHawkEyeControl:t}}var X=n().forwardRef(((e,n)=>{var{hawkEyeControl:t}=J(e);return(0,o.useImperativeHandle)(n,(()=>d({},e,{hawkEyeControl:t})),[t]),null})),ee=["visiable","position"],oe=function(e){void 0===e&&(e={});var{visiable:n,position:t}=e,r=w(e,ee),{map:a}=b(),[i,l]=(0,o.useState)(n),[s,u]=(0,o.useState)(),{container:c,Portal:p}=v();return(0,o.useEffect)((()=>{if(AMap&&a&&!s){var o=a.getCenter();e.children&&(r.content=c);var n=new AMap.InfoWindow(d({},r,{position:t||o}));return u(n),i&&n.open(a,t||o),()=>{n&&(a&&a.remove(n),u(void 0))}}}),[a]),(0,o.useEffect)((()=>{s&&s.setContent(e.children?c:r.content||"")}),[e.children,c,r.content,s]),(0,o.useMemo)((()=>{if(i!==n&&s&&a)if(l(n),n){var e=a.getCenter();s.open(a,t||e)}else s.close()}),[n,s]),(0,o.useEffect)((()=>{if(a&&s&&n){var e=a.getCenter();s.open(a,t||e)}}),[t]),E(s,e,["Content","Anchor","Size"]),h(s,e,["onOpen","onClose","onChange"]),{isOpen:i,setIsOpen:l,infoWindow:s,setInfoWindow:u,InfoWindowPortal:p}},ne=n().forwardRef(((e,n)=>{var{infoWindow:t,InfoWindowPortal:r}=oe(e);return(0,o.useImperativeHandle)(n,(()=>d({},e,{infoWindow:t}))),(0,s.jsx)(r,{children:e.children})})),te=["visiable","defaultType"];function re(e){void 0===e&&(e={});var[n,t]=(0,o.useState)(),{visiable:r,defaultType:a=0}=e,i=w(e,te),{map:l}=b();return(0,o.useEffect)((()=>{var e;if(l&&!n)return l.plugin(["AMap.MapType"],(()=>{e=new AMap.MapType(d({defaultType:a},i)),l.addControl(e),t(e)})),()=>{e&&l.removeControl(e)}}),[l]),M(n,r),{mapTypeControl:n,setMapTypeControl:t}}var ae=n().forwardRef(((e,n)=>{var{mapTypeControl:t}=re(e);return(0,o.useImperativeHandle)(n,(()=>d({},e,{mapTypeControl:t})),[t]),null}));function ie(e){void 0===e&&(e={});var[n,t]=(0,o.useState)(),{visiable:r,type:a,options:i}=e,{map:l}=b();return(0,o.useEffect)((()=>{if(l){var o=null;if(a)switch(a){case le.ROADNET:o=new AMap.TileLayer.RoadNet({});break;case le.SATELLITE:o=new AMap.TileLayer.Satellite({});break;case le.TRAFFIC:o=new AMap.TileLayer.Traffic({})}return i&&(o=new AMap.TileLayer(i)),o&&(l.add(o),e.onAdded&&e.onAdded(),t(o)),()=>{o&&(AMap.v?l&&l.remove(o):l&&l.removeLayer(o),t(null),e.onRemoved&&e.onRemoved())}}}),[l,a,i]),M(n,r),{tileLayer:n,setTileLayer:t}}var le=function(e){return e.SATELLITE="satellite",e.TRAFFIC="traffic",e.ROADNET="roadnet",e}({}),se=n().forwardRef(((e,n)=>{var{tileLayer:t}=ie(e);return(0,o.useImperativeHandle)(n,(()=>d({},e,{tileLayer:t})),[t]),null})),ue=["visiable","children"],ce=function(e){void 0===e&&(e={});var{visiable:n}=e,t=w(e,ue),{map:r}=b(),[a,i]=(0,o.useState)(),{container:l,Portal:s}=v();return(0,o.useEffect)((()=>{if(!a&&r){e.children&&(t.content=l);var o=new AMap.Marker(d({},t));r.add(o),i(o)}return()=>{a&&(a.setMap(null),i(void 0))}}),[r,a]),M(a,n),E(a,e,["Path","Anchor","Offset","Animation","Clickable","Position","Angle","Label","zIndex","Icon","Draggable","Cursor","Content","Map","Title","Top","Shadow","Shape","ExtData"]),h(a,e,["onClick","onDblClick","onRightClick","onMouseMove","onMouseOver","onMouseOut","onMouseDown","onMouseUp","onDragStart","onDragging","onDragEnd","onMoving","onMoveEnd","onMoveAlong","onTouchStart","onTouchMove","onTouchEnd"]),{marker:a,setMarker:i,MarkerPortal:s}},de=(0,o.forwardRef)(((e,n)=>{var{marker:t,MarkerPortal:r}=ce(e);return(0,o.useImperativeHandle)(n,(()=>d({},e,{marker:t})),[t]),(0,s.jsx)(r,{children:e.children})})),pe=["visiable","children","text","icon"],ve=(0,o.forwardRef)(((e,n)=>{var{labelMarker:t}=function(e){void 0===e&&(e={});var{visiable:n,text:t,icon:r}=e,a=w(e,pe),{map:i,AMap:l}=b(),[s,u]=(0,o.useState)();return(0,o.useEffect)((()=>{if(!s&&i){var e,o=t;t||(o={content:"",direction:"right",offset:[-20,-5],style:{fontSize:12,fillColor:"#22886f",strokeColor:"#fff",strokeWidth:2}});var n=r;n||(n={image:"http://webapi.amap.com/theme/v1.3/markers/b/mark_bs.png",size:[19,32],anchor:"center"});var c,p=new l.LabelMarker(d({style:n,icon:n,text:o},a));u(p),0===(null==l||null==(e=l.v)?void 0:e.indexOf("1.4"))&&(i.labelMarkersLayer?c=i.labelMarkersLayer:(i.labelMarkersLayer=c=new l.LabelsLayer({zooms:[3,20],zIndex:101,collision:!0,animation:!0}),i.add(c)),c.add(p)),i.add(p)}return()=>{var e,o;s&&(0===(null==l||null==(e=l.v)?void 0:e.indexOf("1.4"))&&(null==i||null==(o=i.labelMarkersLayer)||o.remove(s)),u(void 0))}}),[s,i]),M(s,n),E(s,e,["Name","Position","Zooms","Opacity","zIndex","Rank","Text","Icon","ExtData","Top"]),h(s,e,["onMousedown","onMouseup","onTouchstart","onTouchmove","onTouchend","onClick","onMousemove","onMouseover","onMouseout"]),{labelMarker:s,setLabelMarker:u}}(e);return(0,o.useImperativeHandle)(n,(()=>d({},e,{labelMarker:t})),[t]),null})),fe=["visiable"],Me=function(e){void 0===e&&(e={});var{visiable:n}=e,t=w(e,fe),{map:r}=b(),{opacity:a=.8,zIndex:i=1111,style:l,data:s}=t||{},[u,c]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&r&&!u){var e=l;e||(e=[{url:"https://webapi.amap.com/images/mass/mass0.png",anchor:new AMap.Pixel(6,6),size:new AMap.Size(11,11),zIndex:3},{url:"https://webapi.amap.com/images/mass/mass1.png",anchor:new AMap.Pixel(4,4),size:new AMap.Size(7,7),zIndex:2},{url:"https://webapi.amap.com/images/mass/mass2.png",anchor:new AMap.Pixel(3,3),size:new AMap.Size(5,5),zIndex:1}]);var o=new AMap.MassMarks(s||[],{opacity:a,zIndex:i,style:e});return c(o),o.setMap(r),()=>{o&&(o.clear(),c(void 0))}}}),[r]),M(u,n),E(u,e,["Map","Data","Style","Opacity","zIndex","Zooms"]),h(u,e,["onClick","onDblClick","onMouseMove","onMouseOut","onMouseUp","onMouseDown","onMouseOver","onTouchStart","onTouchEnd"]),{massMarks:u,setMassMarks:c}},me=n().forwardRef(((e,n)=>{var{massMarks:t}=Me(e);return(0,o.useImperativeHandle)(n,(()=>d({},e,{massMarks:t})),[t,e]),null})),he=["visiable"],Ee=function(e){void 0===e&&(e={});var{visiable:n}=e,t=w(e,he),{map:r}=b(),[a,i]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&r&&!a){var e=new AMap.Polygon(d({},t));return r.add(e),i(e),()=>{e&&(AMap.v?r&&r.remove(e):r&&r.removeLayer(e),i(void 0))}}}),[r]),M(a,n),E(a,e,["Path","Options","Map","ExtData","Draggable"]),h(a,e,["onClick","onDblClick","onRightClick","onHide","onShow","onMouseDown","onMouseUp","onMouseOver","onMouseOut","onChange","onDragStart","onDragging","onDragEnd","onTouchStart","onTouchMove","onTouchEnd"]),{polygon:a,setPolygon:i}},ye=(0,o.forwardRef)(((e,n)=>{var{children:t}=e,{polygon:r}=Ee(e);if((0,o.useImperativeHandle)(n,(()=>d({},e,{polygon:r})),[r]),t&&(0,o.isValidElement)(t)&&r){var a={polygon:r,polyElement:r};return(0,o.cloneElement)(t,d({},e,a))}return null})),Ce=(0,o.forwardRef)(((e,n)=>{var{active:t,polygon:r}=e,{map:a}=b(),[i,l]=(0,o.useState)(!0),[s,u]=(0,o.useState)();return(0,o.useImperativeHandle)(n,(()=>d({},e,{polyEditor:s}))),(0,o.useEffect)((()=>{if(r&&a&&!s&&AMap&&AMap.PolygonEditor){var e=new AMap.PolygonEditor(a,r);r.on("hide",(()=>l(!1))),r.on("show",(()=>l(!0))),u(e)}}),[r]),(0,o.useEffect)((()=>{s&&(i&&!t?(s.close(),e.onEnd&&e.onEnd({target:e.polygon})):i&&t?(s.open(),e.onAdd&&e.onAdd({target:e.polygon})):!i&&t&&(s.close(),e.onEnd&&e.onEnd({target:e.polygon})))}),[t,i]),h(s,e,["onEnd","onAddnode","onRemovenode","onAdjust","onMove","onAdd"]),null})),we=(0,o.forwardRef)(((e,n)=>{var{active:t,polyElement:r}=e,{map:a}=b(),[i,l]=(0,o.useState)(!0),[s,u]=(0,o.useState)();return(0,o.useImperativeHandle)(n,(()=>d({},e,{polyEditor:s}))),(0,o.useEffect)((()=>{if(r&&a&&!s&&AMap&&AMap.PolyEditor){var e=new AMap.PolyEditor(a,r);r.on("hide",(()=>l(!1))),r.on("show",(()=>l(!0))),u(e)}}),[r]),(0,o.useEffect)((()=>{s&&(i&&!t?(s.close(),e.onEnd&&e.onEnd({type:"end",target:e.polyElement})):i&&t?s.open():!i&&t&&(s.close(),e.onEnd&&e.onEnd({type:"end",target:e.polyElement})))}),[t,i]),h(s,e,["onEnd","onAddnode","onAdjust","onRemovenode"]),null})),Ae=["visiable"];function ge(e){void 0===e&&(e={});var[n,t]=(0,o.useState)(),{visiable:r}=e,a=w(e,Ae),{map:i}=b();return(0,o.useEffect)((()=>{if(i&&!n){var e=new AMap.Polyline(d({},a));return i.add(e),t(e),()=>{e&&(AMap.v?i&&i.remove(e):i&&i.removeLayer(e),t(void 0))}}}),[i]),M(n,r),E(n,e,["Path","Options","Map","ExtData","Draggable"]),h(n,e,["onHide","onShow","onMouseOut","onChange","onDragStart","onDragging","onDragEnd","onRightClick","onDblClick","onMouseDown","onClick","onMouseOver","onTouchEnd","onTouchMove","onTouchStart","onMouseUp"]),{polyline:n,setPolyline:t}}var ke=n().forwardRef(((e,n)=>{var{children:t}=e,{polyline:r}=ge(e);if((0,o.useImperativeHandle)(n,(()=>d({},e,{polyline:r})),[r]),t&&(0,o.isValidElement)(t)&&r){var a={polyElement:r,polyline:r};return(0,o.cloneElement)(t,d({},e,a))}return null})),be=(0,o.forwardRef)(((e,n)=>{var{active:t,polyline:r}=e,{map:a}=b(),[i,l]=(0,o.useState)(!0),[s,u]=(0,o.useState)();return(0,o.useImperativeHandle)(n,(()=>d({},e,{polyEditor:s}))),(0,o.useEffect)((()=>{if(r&&a&&!s&&AMap&&AMap.PolylineEditor){var e=new AMap.PolylineEditor(a,r);r.on("hide",(()=>l(!1))),r.on("show",(()=>l(!0))),u(e)}}),[r]),(0,o.useEffect)((()=>{s&&(i&&!t?(s.close(),e.onEnd&&e.onEnd({target:e.polyline})):i&&t?(s.open(),e.onAdd&&e.onAdd({target:e.polyline})):!i&&t&&(s.close(),e.onEnd&&e.onEnd({target:e.polyline})))}),[t,i,s]),h(s,e,["onEnd","onAddnode","onRemovenode","onAdjust","onAdd"]),null})),Te=function(e){return e[e.MARKER=0]="MARKER",e[e.POLYLINE=1]="POLYLINE",e[e.POLYGON=2]="POLYGON",e[e.CIRCLE=3]="CIRCLE",e[e.RECTANGLE=4]="RECTANGLE",e[e.MEASUREAREA=5]="MEASUREAREA",e[e.RULE=6]="RULE",e[e.RECTZOOMIN=7]="RECTZOOMIN",e[e.RECTZOOMOUT=8]="RECTZOOMOUT",e}({}),Se=(0,o.forwardRef)(((e,n)=>{var{active:t,type:r,drawElementOptions:a,ifClear:i}=e,{map:l}=b(),[s,u]=(0,o.useState)();return(0,o.useImperativeHandle)(n,(()=>d({},e,{mouseTool:s}))),(0,o.useEffect)((()=>{if(l&&!s&&AMap&&AMap.MouseTool){var e=new AMap.MouseTool(l);u(e)}}),[l,Map,AMap.MouseTool]),(0,o.useEffect)((()=>{if(s)if(t)switch(r){case Te.MARKER:s.marker(a||{});break;case Te.POLYLINE:s.polyline(a||{});break;case Te.POLYGON:s.polygon(a||{});break;case Te.CIRCLE:s.circle(a||{});break;case Te.RECTANGLE:s.rectangle(a||{});break;case Te.MEASUREAREA:s.measureArea(a||{});break;case Te.RULE:s.rule(a||{});break;case Te.RECTZOOMIN:s.rectZoomIn(a||{});break;case Te.RECTZOOMOUT:s.rectZoomOut(a||{})}else s.close(i)}),[t,i]),h(s,e,["onDraw"]),null})),Re=["visiable"],Oe=function(e){void 0===e&&(e={});var{visiable:n}=e,t=w(e,Re),{map:r}=b(),[a,i]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&r&&!a){var e=new AMap.Rectangle(d({},t));return r.add(e),i(e),()=>{e&&(AMap.v?r&&r.remove(e):r&&r.removeLayer(e),i(void 0))}}}),[r]),M(a,n),E(a,e,["Bounds","Options","Map","ExtData"]),h(a,e,["onHide","onShow","onClick","onDblClick","onRightClick","onMouseOut","onMouseOver","onMouseUp","onMouseDown","onTouchEnd","onTouchMove","onTouchStart"]),{rectangle:a,setRectangle:i}},xe=n().forwardRef(((e,n)=>{var{rectangle:t}=Oe(e);return(0,o.useImperativeHandle)(n,(()=>d({},e,{rectangle:t}))),null}));function Ie(e){void 0===e&&(e={});var[n,t]=(0,o.useState)(),{position:r,visiable:a,offset:i}=e,{map:l}=b();return(0,o.useEffect)((()=>{var e;if(l&&!n)return l.plugin(["AMap.Scale"],(()=>{e=new AMap.Scale({offset:i,position:r}),l.addControl(e),t(e)})),()=>{e&&l.removeControl(e)}}),[l]),M(n,a),{scaleControl:n,setScaleControl:t}}var Pe=n().forwardRef(((e,n)=>{var{scaleControl:t}=Ie(e);return(0,o.useImperativeHandle)(n,(()=>d({},e,{scaleControl:t})),[t]),null})),Le=["visiable"],De=function(e){void 0===e&&(e={});var{visiable:n}=e,t=w(e,Le),[r,a]=(0,o.useState)(),{map:i}=b(),{container:l,Portal:s}=v();return(0,o.useEffect)((()=>{if(AMap&&i&&!r){e.children&&(t.text=l.innerHTML);var o=new AMap.Text(d({},t));return i.add(o),a(o),()=>{o&&(o.remove(),a(void 0))}}}),[i]),(0,o.useEffect)((()=>{r&&r.setText(e.children?l.innerHTML:e.text||"")}),[e.children,e.text,l,r]),M(r,n),E(r,e,["Style","Title","Clickable","Draggable","Map","Position","Offset","Angle","zIndex","Top","Cursor","ExtData"]),h(r,e,["onMoving","onTouchMove","onTouchEnd","onMoveaLong","onTouchStart","onMoveEnd","onClick","onDblClick","onRightClick","onMouseMove","onMouseOver","onMouseOut","onMouseDown","onMouseUp","onDragStart","onDragEnd","onDragging"]),{text:r,setText:a,TextPortal:s}},He=(0,o.forwardRef)(((e,n)=>{var{text:t,TextPortal:r}=De(d({},e));return(0,o.useImperativeHandle)(n,(()=>d({},e,{text:t}))),e.children?(0,s.jsx)(r,{children:e.children}):null}));function ze(e){void 0===e&&(e={});var[n,t]=(0,o.useState)(),{position:r,visiable:a,offset:i}=e,{map:l}=b();return(0,o.useEffect)((()=>{var e;if(l&&!n)return l.plugin(["AMap.ToolBar"],(()=>{e=new AMap.ToolBar({offset:i,position:r}),l.addControl(e),t(e)})),()=>{e&&l.removeControl(e)}}),[l]),M(n,a),{toolBarControl:n,setToolBarControl:t}}var Ne=n().forwardRef(((e,n)=>{var{toolBarControl:t}=ze(e);return(0,o.useImperativeHandle)(n,(()=>d({},e,{toolBarControl:t})),[t]),null})),Be=function(e){void 0===e&&(e={});var{city:n="",type:t="live",onComplete:r,onError:a}=e,[i,l]=(0,o.useState)(),s="live"===t?"getLive":"getForecast";return(0,o.useEffect)((()=>{var e;if(AMap&&!i)return AMap.plugin(["AMap.Weather"],(()=>{e=new AMap.Weather,l(e)})),()=>{e&&l(void 0)}}),[]),(0,o.useMemo)((()=>{var e;i&&n&&t&&(e=i,t&&n&&/^(live|forecast)$/.test(t)&&e[s](n,((e,o)=>{e&&a?a(e):o&&r&&r(o)})))}),[i,n,t]),{weather:i,setWeather:l}},je=n().forwardRef(((e,n)=>{var{weather:t}=Be(e);return(0,o.useImperativeHandle)(n,(()=>d({},e,{weather:t}))),null}))})(),a})()));